# Http插件

## 介绍
`http`插件是基于`axios`的封装，提供一下特性

1. 统一配置，如baseUrl、跨域支持、超时等
2. 请求拦截，token头设置，以及IE的get请求缓存处理
3. 统一响应错误处理
3. 统一响应数据转换
4. `认证失效`处理

**在组件中你可以通过`$http`来访问**

## 错误处理

- `系统级错误` 如果响应代码不是`200`，都将视为失败（`400`另做处理）
- `业务级错误` 通过转换器（见`transform.ts`）将其转换为标准的格式

```js
    {
      code: 'resultCode',
      errMsg: 'resultMesg',
      data: 'data',
      successCode: '000000',
      noAuthCode: '010104'
    }
```

## 401 处理

包括http的401状态吗， 或是业务上定义的`401`，通过上述`noAuthCode` 定义

1. 如果用户未登录， 保存当前路径，跳转到登录页
2. 如果用户已登录， 则给出弹框提示

## 成功处理

如果http请求正常返回， 将直接获得转换后的 `data` 字段数据，
如果 `response.data` 不是Json对象，那么其可能是二进制数据，
将直接返回`response.data`
